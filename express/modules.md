[Назад](../README.md)

### Body-parser

Это middleware для Express, который позволяет извлекать и парсить данные из тела HTTP-запросов, 
прежде чем они будут обработаны вашими маршрутами.

Когда клиент отправляет запрос, данные могут быть в различных форматах (JSON, URL-encoded и т.д.). `body-parser` 
позволяет серверу распознавать и обрабатывать эти данные, делая их доступными в ``req.body``.

#### Какие форматы поддерживаются?
- **JSON:** ``Content-Type: application/jso`` Используется для передачи структурированных данных.
- **URL-encoded:** ``Content-Type: application/x-www-form-urlencoded`` Формат, часто используемый для форм, 
где данные кодируются в виде пар "ключ-значение".
- **Text:** ``Content-Type: text/plain`` Для обработки обычного текста.

### Cors

Это механизм, который позволяет контролировать, какие домены могут взаимодействовать с ресурсами вашего сервера. 
По умолчанию браузеры блокируют запросы к ресурсам, находящимся на другом домене.

Когда ваш веб-клиент (например, браузер) пытается получить ресурсы с сервера, находящегося на другом домене 
(например, API), браузер применяет политику того же источника (Same-Origin Policy). Эта политика ограничивает, 
какие запросы могут быть сделаны с одного источника (домен, протокол и порт) к другому. Модуль CORS позволяет 
настраивать и разрешать такие запросы.

#### Как это работает?
- **Проверка Origin:** Когда поступает запрос, браузер отправляет Origin заголовок, который указывает, 
откуда пришел запрос. CORS проверяет этот заголовок и сравнивает его с разрешенными доменами.
- **Настройка заголовков ответа:** Если источник разрешен, CORS добавляет соответствующие заголовки к ответу. 
Например, добавляет ``Access-Control-Allow-Origin``, позволяющий браузеру выполнить запрос.
- **Preflight запросы:** Для некоторых запросов (например, с методом POST и специфическими заголовками) браузер 
сначала отправляет OPTIONS запрос (preflight request) для проверки, разрешает ли сервер кросс-доменные запросы. 
CORS обрабатывает этот запрос и отправляет ответ с соответствующими заголовками.

### Express-session

Это middleware для Express, который предоставляет функциональность для хранения данных о 
сессиях на сервере. Сессия — это способ запомнить информацию о пользователе между его запросами.

После подключения express-session вы можете использовать объект ``req.session`` для сохранения и доступа к данным 
сессии. Это свойство будет доступно в любом маршруте вашего приложения.

#### Новые свойства:
- `req.session`: Содержит данные сессии, которые можно использовать и модифицировать.
- `req.sessionID`: Идентификатор текущей сессии.
- `req.session.destroy()`: Метод для уничтожения сессии.

#### Как работает?
  - **Подключение:** Вы подключаете express-session к вашему приложению.
  - **Идентификатор сессии:** При первом запросе от клиента на сервере создается сессия, которая получает 
  уникальный идентификатор (например, через cookie).
  - **Хранение данных:** Данные сессии хранятся на сервере, и они могут быть доступны при следующих запросах того 
  же пользователя.
  - **Поддержка состояния:** При каждом запросе, сессия автоматически подтягивается по идентификатору сессии, 
  хранящемуся у клиента (например, в cookie).

### Morgan

Это middleware для логирования HTTP-запросов в приложениях на основе Express. Он помогает отслеживать, 
что происходит с каждым запросом, фиксируя детали запроса и ответа в терминале или в лог-файлах. Это полезно как 
для разработки, так и для мониторинга приложений на продакшене.

#### Как работает?
- **При получении запроса:** начинает логировать запрос, регистрируя информацию о методе (GET, POST), URL, IP-адресе 
и других данных.
- **Во время обработки запроса:** ожидает завершения запроса для записи данных о результате. Он отслеживает такие 
параметры, как статус ответа, время обработки и размер ответа.
- **После завершения запроса:** Когда сервер отправляет ответ клиенту, Morgan записывает оставшуюся информацию 
(статус ответа, время обработки, размер ответа) и выводит лог в консоль или файл.

### Passport.js

Это библиотека для аутентификации в приложениях на базе Node.js. Она поддерживает широкий спектр 
стратегий аутентификации, таких как логин/пароль, OAuth (Google, Facebook, GitHub), JWT (JSON Web Token) и другие. 
Passport.js предоставляет гибкий механизм для добавления аутентификации в Express.js-приложениях.

#### Новые свойства:
- **req.user:** После успешной аутентификации объект пользователя становится доступным в запросе.
- **req.isAuthenticated():** Метод, который проверяет, прошел ли пользователь аутентификацию.
- **req.logout():** Удаляет данные аутентификации пользователя и завершает сессию.
- **req.login(user, callback):** Функция, которая позволяет принудительно аутентифицировать пользователя 
(обычно используется для сессионного логина).

#### Как работает?
- **Выбор стратегии:** Когда пользователь отправляет данные для аутентификации. Passport.js выбирает стратегию 
для обработки этого запроса. Каждая стратегия имеет свою логику аутентификации, например, сравнение пароля или 
проверку JWT-токена.
- **Аутентификация пользователя:** В зависимости от стратегии Passport.js выполняет проверку данных. Если проверка 
успешна, пользователю создается сессия или выдается токен.
- **Управление сессиями:** Если используется сессионная аутентификация (например, с использованием express-session), 
Passport.js сохраняет данные пользователя в сессию после успешной аутентификации.
- **Аутентификационные маршруты:** Passport.js предоставляет middleware для защиты маршрутов. Например, можно 
ограничить доступ к профилю пользователя, требуя, чтобы он был аутентифицирован.
- **Ошибки аутентификации:** Если аутентификация проваливается (например, неверный пароль или токен истёк), 
Passport.js перенаправляет пользователя или возвращает сообщение об ошибке.
