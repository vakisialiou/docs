[Назад](./questions.md)

### Как работает система тегов для Docker образов?

Система тегов в Docker используется для идентификации версий образов и их управления. Теги помогают различать 
различные сборки одного и того же образа и связывают их с определёнными состояниями, версиями, или окружениями.

Когда вы создаете или загружаете Docker образ, вы можете назначить ему тег. Это делается с помощью двоеточия 
(`:`) после имени образа, например, `nginx:latest`

Docker образы состоят из двух частей: имени образа и тега. Если тег не указан, Docker по умолчанию использует 
тег `latest`.
- Пример с тегом: `myapp:1.0.0`
- Пример без тега: `myapp` — в этом случае будет автоматически использован `latest`, что эквивалентно `myapp:latest`.

Для работы с тегами используются команды `docker build`, `docker tag`, `docker push`, `docker pull`

1. Создание образа с тегом
    ```bash
    docker build -t myapp:1.0.0 .
    ```
2. Назначение нового тега существующему образу
    ```bash
    docker tag myapp:1.0.0 myapp:latest
    ```
   - Это действие присваивает тег `latest` образу с версией `1.0.0`. Теперь у этого образа есть два 
   тега: `1.0.0` и `latest`.
3. Отправка образа в Docker Hub
    ```bash
    docker push myapp:1.0.0
    ```
   - Эта команда загружает образ с тегом `1.0.0` в Docker Hub. Аналогично можно загрузить
4. Использование тегов при загрузке образа - Когда вы загружаете образ с Docker Hub или другого реестра, тег 
позволяет указать, какую именно версию образа загрузить.
    ```bash
    docker pull myapp:1.0.0
    # or
    docker pull myapp:latest
    ```

#### Важные моменты:
- **Тег `latest` не обязательно означает "последний" образ** - Это просто тег, который принято использовать 
для последней стабильной версии, но это решение принимается разработчиками образа.
- **Теги — это не версии образа.** - Docker образы определяются своим хешем (`SHA256`), а теги — это просто метки, 
которые ссылаются на конкретные версии образа.
- **Один Docker образ может иметь любое количество тегов** Это просто ссылки на конкретный образ, поэтому один и 
тот же образ может быть доступен под разными тегами.

### Как удалить тэг?

Чтобы удалить тег из Docker образа, нужно удалить саму ссылку на образ с этим тегом, но важно понимать, что Docker 
рассматривает теги как метки, указывающие на один и тот же образ. Удаление тега не удаляет сам образ, если у него 
есть другие теги.

1. Если вы хотите удалить тег локально, вы можете использовать команду `docker rmi`, которая удаляет ссылку (тег) на образ.
    ```bash
    docker rmi myapp:1.0.0
    ```
   - Эта команда удалит тег `myapp:1.0.0`, но сам образ останется, если на него указывают другие теги. Если это был 
   последний тег для данного образа, Docker удалит и сам образ.

### Сопутствующие разделы

- [Что такое DockerFile?](./04.1.dockerfile.md)
- [Что такое Docker Compose?](./04.2.docker-compose.md)
- [Как подключить внешние файлы к контейнеру?](./05.2.volume.md)
- [Что такое оркестрация?](./06.1.scale.md)
