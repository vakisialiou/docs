[Назад](../README.md)

### Что такое модули в Node.js?
Модули в Node.js — это отдельные блоки кода, которые помогают структурировать и организовывать ваше приложение. 
Модули позволяют разделить код на независимые части, которые могут быть повторно использованы и легко управляемы. 
В Node.js каждый файл считается модулем.

**Типы модулей:**
1. **Встроенные модули:** Модули, которые поставляются вместе с Node.js, (fs, http, path) и т.д.
2. **Пользовательские модули:** Модули, которые создаются вами для решения специфических задач.
3. **Модули сторонних разработчиков:** Модули, устанавливаемые через npm, (express, lodash) и т.д.

### Объясните разницу между модулями CommonJS и ES6.

1. **Модули CommonJS (CJS)**
   - Модули CommonJS являются старым стандартом модулей, который используется в Node.js по умолчанию до версии (13.2.0). 
Их основной синтаксис включает функции require() для импорта и module.exports или exports для экспорта.
   - CommonJS использует **синхронная загрузка модулей** такая загрузка не всегда оптимальна для больших проектов.
   - CommonJS работает динамически — модули загружаются во время выполнения (через require()). Это делает анализ 
   сложнее, так как содержимое модуля может быть неизвестным до выполнения программы, что снижает возможности 
   оптимизации.
2. Модули ES6 (ESM)
   - ES6-модули — это стандарт модулей, введенный в спецификации ECMAScript 2015 (ES6). Они обеспечивают 
более современный и гибкий способ работы с модулями и используются как в браузерах, так и в Node.js 
(с версии 12 с поддержкой флага, а по умолчанию с версии 13.2.0).
   - ES6 использует **асинхронную загрузку модулей**, что позволит ускорить загрузку больших проектов.
   - Подключение модулей производятся с помощью ключевых слов import и export.
   - Для использования ES6-модулей в Node.js, файлы должны иметь расширение .mjs или нужно указать "type": "module" 
   в package.json.
   - **Статический анализ** позволяет инструментам (компиляторам, сборщикам кода или редакторам) анализировать код 
   без его выполнения. Это возможно, потому что import и export в ES6-модулях всегда находятся на верхнем уровне кода 
   и определяются до выполнения скрипта. 
   - Так как стоит отметить что ключевые слова import и export являются частью синтаксиса JavaScript на уровне 
   языка, как и переменные, функции или циклы.
   - Сборщики (например, Webpack, Babel) или системы автоматизации могут легко определить зависимости между модулями 
   до того, как код выполнится. Это помогает:
     - Оптимизировать загрузку модулей.
     - Предупреждать об ошибках, связанных с неправильными импортами/экспортами.
     - Удалять неиспользуемый код (tree-shaking), что делает код более эффективным.

### Как работает механизм кэширования модулей в Node.js?

1. Общие принципы кэширования:
   - Модуль загружается и выполняется один раз при первом запросе.
   - После этого результат сохраняется в кэше.
   - При повторных вызовах кэшированный модуль возвращается без повторного выполнения.
   - Модуль кэшируется на основе его пути в файловой системе. Если два модуля имеют одинаковое имя, но находятся 
   в разных местах, они будут кэшироваться отдельно.
2. Отличия:
   - CommonJS:
      - Модуль импортируется с помощью require()
      - Динамически загружает модули во время выполнения программы.
     - Модули загружаются и выполняются один раз при первом импорте.
      - При повторном вызове require() для того же модуля он не выполняется заново, а возвращается из кэша.
      - Модуль можно удалить из кэша вручную, используя delete require.cache[require.resolve('module_path')]. 
      Это позволяет загрузить модуль повторно, если это нужно.
   - ES6:
       - Модуль импортируется с помощью ключевого слова import.   
       - import в ES6 загружает модули до выполнения программы, что позволяет использовать их для статического
       анализа и кэшировать более эффективно.
       - Модули загружаются и выполняются один раз при первом импорте.
       - При повторных вызовах import модуль также возвращается из кэша, а не загружается заново.
       - В ES6 нет встроенного способа очистить кэш, как это можно сделать с require через delete require.cache.


### Какие встроенные модули Node.js используются чаще всего?
1. http, https
   - Используется для создания HTTP-серверов и клиентских запросов.
   - Часто применяется в веб-приложениях.
2. fs
   - Модуль для работы с файловой системой.
   - Позволяет читать, записывать, изменять и удалять файлы.
3. path
   - Предоставляет утилиты для работы с путями файлов и директорий.
   - Упрощает создание кросс-платформенных путей.
4. os
   - Предоставляет информацию о системе, на которой запущен Node.js.
   - Включает методы для работы с операционной системой, такими как получение информации о процессоре, памяти и сети.
5. events
   - Реализует паттерн "наблюдатель".
   - Позволяет создавать и обрабатывать пользовательские события.
6. util
   - Содержит утилиты для работы с объектами, функциями и строками.
   - Включает методы для работы с асинхронным кодом и форматированием строк.
7. querystring
   - Используется для работы со строками запросов URL.
   - Позволяет парсить и форматировать строки запросов.
8. stream
   - Обеспечивает работу с потоками данных.
   - Позволяет обрабатывать данные по мере их поступления, что особенно полезно для работы с большими файлами.
9. buffer
   - Используется для работы с бинарными данными.
   - Позволяет манипулировать и преобразовывать двоичные данные.
10. child_process
    - Позволяет создавать и взаимодействовать с дочерними процессами.
    - Полезен для выполнения командных строк и работы с внешними приложениями.
11. crypto
    - Предоставляет инструменты для шифрования и хеширования данных.
    - Используется для повышения безопасности приложений.